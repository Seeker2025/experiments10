{"version":3,"file":"page-9.js","sources":["../src/js/page09.js"],"sourcesContent":["console.log('page 09');\n\n////// CRUD\n\n///// R - GET\n// fetch('https://jsonplaceholder.typicode.com/posts/1')\n//     .then((response) => response.json())\n//     .then((json) => console.log(json));\n\n////// C - POST\n\n// const options = {\n//     method: \"POST\",\n//     headers: {\n//         \"Content-type\": \"application/json\"\n//     },\n//         body: JSON.stringify({\n//             title: 'Hello from JS',\n//             body: 'qdfdfdfd',\n//             userId: 12\n//         }),\n//     }\n// fetch('https://jsonplaceholder.typicode.com/posts', options)\n//     .then(resp =>{\n//         if(!resp.ok){\n//             throw new Error(resp.statusText)\n//         }\n//         return resp.json();\n//     })\n//     .then(data => console.log(data))\n//     .catch(err => console.log(err));\n\nconst addPost = document.querySelector('.js-add');\nconst listPosts = document.querySelector('.js-posts');\nconst formWrapper = document.querySelector('.js-form');\nconst errMessage = document.querySelector('.js-error');\nconsole.log(addPost);\nconsole.log(listPosts);\nconsole.log(formWrapper);\n\naddPost.addEventListener('click', handlerAddPost);\n\nfunction handlerAddPost(){\n    formWrapper.innerHTML = `\n        <form action=\"submit\" class=\"js-form-add\">\n            <input type=\"text\" name=\"title\">\n            <textarea name=\"body\" cols=\"30\" rows=\"10\"></textarea>\n            <button>Додати пост</button>\n        </form>    \n    `\nconst form = document.querySelector('.js-form-add');\nform.addEventListener('submit', handlerFormSubmit);\nconsole.log(form);\n}\nfunction handlerFormSubmit(evt){\n    evt.preventDefault();\n\n    const {title, body} = evt.currentTarget.elements;\n\n    const data = {\n        title: title.value,\n        body: body.value,\n    };\n\n    addPostService(data).then(obj => {\n        listPosts.insertAdjacentHTML('beforeend', creatPostMarkup(obj));\n        console.log(obj);\n    })\n    .catch(()=>{\n            errMessage.innerHTML = \"Не можливо додати пост\";\n    })\n    .finally(()=>{\n            formWrapper.innerHTML=\"\";\n        setTimeout(()=>{\n            errMessage.innerHTML = \"\";\n        }, 1500)\n       \n    })\n}\n\nfunction creatPostMarkup({ id, title, body }){\n    return `\n        <li data-id=\"${id}\">\n        <h2>${title}</h2>\n        <p>${body}</p>\n        </li>\n    `;\n}\n\nfunction addPostService(data){\n    const options = {\n    method: \"POST\",\n    headers: {\n        \"Content-type\": \"application/json\",\n    },\n        body: JSON.stringify( data ),\n};\nreturn fetch('https://jsonplaceholder10.typicode.com/posts', options)\n    .then(resp =>{\n        if(!resp.ok){\n            throw new Error(resp.statusText)\n        }\n        return resp.json();\n    })\n \n}\n\n\n\n"],"names":["addPost","listPosts","formWrapper","errMessage","handlerAddPost","form","handlerFormSubmit","evt","title","body","data","addPostService","obj","creatPostMarkup","id","options","resp"],"mappings":"oCAAA,QAAQ,IAAI,SAAS,EAgCrB,MAAMA,EAAU,SAAS,cAAc,SAAS,EAC1CC,EAAY,SAAS,cAAc,WAAW,EAC9CC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAa,SAAS,cAAc,WAAW,EACrD,QAAQ,IAAIH,CAAO,EACnB,QAAQ,IAAIC,CAAS,EACrB,QAAQ,IAAIC,CAAW,EAEvBF,EAAQ,iBAAiB,QAASI,CAAc,EAEhD,SAASA,GAAgB,CACrBF,EAAY,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAO5B,MAAMG,EAAO,SAAS,cAAc,cAAc,EAClDA,EAAK,iBAAiB,SAAUC,CAAiB,EACjD,QAAQ,IAAID,CAAI,CAChB,CACA,SAASC,EAAkBC,EAAI,CAC3BA,EAAI,eAAc,EAElB,KAAM,CAAC,MAAAC,EAAO,KAAAC,CAAI,EAAIF,EAAI,cAAc,SAElCG,EAAO,CACT,MAAOF,EAAM,MACb,KAAMC,EAAK,KACnB,EAEIE,EAAeD,CAAI,EAAE,KAAKE,GAAO,CAC7BX,EAAU,mBAAmB,YAAaY,EAAgBD,CAAG,CAAC,EAC9D,QAAQ,IAAIA,CAAG,CACvB,CAAK,EACA,MAAM,IAAI,CACHT,EAAW,UAAY,wBACnC,CAAK,EACA,QAAQ,IAAI,CACLD,EAAY,UAAU,GAC1B,WAAW,IAAI,CACXC,EAAW,UAAY,EACnC,EAAW,IAAI,CAEf,CAAK,CACL,CAEA,SAASU,EAAgB,CAAE,GAAAC,EAAI,MAAAN,EAAO,KAAAC,CAAI,EAAG,CACzC,MAAO;AAAA,uBACYK,CAAE;AAAA,cACXN,CAAK;AAAA,aACNC,CAAI;AAAA;AAAA,KAGjB,CAEA,SAASE,EAAeD,EAAK,CACzB,MAAMK,EAAU,CAChB,OAAQ,OACR,QAAS,CACL,eAAgB,kBACxB,EACQ,KAAM,KAAK,UAAWL,CAAI,CAClC,EACA,OAAO,MAAM,+CAAgDK,CAAO,EAC/D,KAAKC,GAAO,CACT,GAAG,CAACA,EAAK,GACL,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEnC,OAAOA,EAAK,KAAI,CACxB,CAAK,CAEL"}