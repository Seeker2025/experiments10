{"version":3,"file":"page-5.js","sources":["../src/js/page05.js"],"sourcesContent":["console.log('page 05');\n//////FSOn 77 Модуль 11 Урок 1 Артем Рисіч 24.04.2023\n\n// fetch('http://localhost:3000/books')\n//     .then(res=>{\n//        console.log(res.json())\n//     })\n\n////// CRUD\n// fetch('https://jsonplaceholder.typicode.com/posts/2')\n// .then((response)=> response.json())\n// .then((json)=>console.log(json))\n\nfunction addPostService(data){\n    const options ={\n        method: \"POST\",\n        headers: {\n            \"Content-type\": \"application/json\",\n        },\n        body: JSON.stringify( data\n          // {\n          //   title: \"Hello from JS\",\n          //   body: \"qweryuiqWAERTY\",\n          //   userId: 12,\n          // }\n      )\n    }\n\n    return fetch('https://jsonplaceholder.typicode.com/posts', options)\n        .then(resp =>{\n            if(!resp.ok){\n                throw new Error(resp.statusText)\n            }\n            return resp.json();\n        })\n        // .then(data=>console.log(data))\n        // .catch(err=>console.log(err));\n}\n\nconst addPost = document.querySelector(\".js-add\");\n// console.log(addPost);\nconst listPosts = document.querySelector(\".js-posts\");\n// console.log(listPosts);\nconst formWrapper = document.querySelector(\".js-form\");\n// console.log(formWrapper);\nconst errMessage = document.querySelector(\".js-error\");\n// console.log(errMessage);\n\naddPost.addEventListener('click', handlerAddPost)\n\nfunction handlerAddPost(){\n    formWrapper.innerHTML = `\n        <form action=\"submit\" class=\"js-form-add form-add\">\n          <input type=\"text\" name=\"title\">\n          <textarea name=\"body\" cols=\"30\" rows=\"10\"></textarea>\n          <button>Додати пост</button>\n        </form>\n    `\n    const form = document.querySelector(\".js-form-add\");\n    form.addEventListener('submit', handlerFormSubmit);\n    console.log(form);\n}\n\nfunction handlerFormSubmit(evt){\n    evt.preventDefault();\n    // console.log(evt.currentTarget);\n    // console.dir(evt.currentTarget.elements);\n\n    const {title, body} = evt.currentTarget.elements;\n    // console.log(title.value);\n    // console.log(body.value);\n     const data = {\n      title: title.value,\n      body: body.value,\n     };\n     addPostService(data)\n    .then(obj=>{\n      console.log(obj);\n      listPosts.insertAdjacentHTML('beforeend', createPostMarkup(obj));\n  }).catch(()=>{\n    errMessage.innerHTML = 'Не можливо додати пост';\n  }).finally(()=>{\n    formWrapper.innerHTML = \"\";\n    setTimeout(()=>{\n      errMessage.innerHTML = \"\";\n    }, 2000);\n  });\n}\n\nfunction createPostMarkup({id, title, body}){\n  return `\n            <li data-id=${id} class=\"li_box\">\n                <h2>${title}</h2>\n                <p>${body}</p>\n            </li> `;\n}\n\n////// \"PUT\"\n\n// const options02 = {\n//   method: \"PUT\",\n//   body: JSON.stringify({\n//     id: 1,\n//     title: \"cat\",\n//   }),\n//   headers: {\n//     \"Content-type\": \"application/json\",\n//   },\n// }\n// fetch('https://jsonplaceholder.typicode.com/posts/1', options02)\n//   .then(resp => console.log(resp))\n\n////// \"DELETE\"\n// const options03 = {\n//   method: \"DELETE\"\n// }\n// fetch('https://jsonplaceholder.typicode.com/posts/1', options03)\n//   .then(resp => console.log(resp))\n\n\n\n\n\n    "],"names":["addPostService","data","options","resp","addPost","listPosts","formWrapper","errMessage","handlerAddPost","form","handlerFormSubmit","evt","title","body","obj","createPostMarkup","id"],"mappings":"oCAAA,QAAQ,IAAI,SAAS,EAarB,SAASA,EAAeC,EAAK,CACzB,MAAMC,EAAS,CACX,OAAQ,OACR,QAAS,CACL,eAAgB,kBAC5B,EACQ,KAAM,KAAK,UAAWD,CAM9B,CACA,EAEI,OAAO,MAAM,6CAA8CC,CAAO,EAC7D,KAAKC,GAAO,CACT,GAAG,CAACA,EAAK,GACL,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEnC,OAAOA,EAAK,KAAI,CAC5B,CAAS,CAGT,CAEA,MAAMC,EAAU,SAAS,cAAc,SAAS,EAE1CC,EAAY,SAAS,cAAc,WAAW,EAE9CC,EAAc,SAAS,cAAc,UAAU,EAE/CC,EAAa,SAAS,cAAc,WAAW,EAGrDH,EAAQ,iBAAiB,QAASI,CAAc,EAEhD,SAASA,GAAgB,CACrBF,EAAY,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAOxB,MAAMG,EAAO,SAAS,cAAc,cAAc,EAClDA,EAAK,iBAAiB,SAAUC,CAAiB,EACjD,QAAQ,IAAID,CAAI,CACpB,CAEA,SAASC,EAAkBC,EAAI,CAC3BA,EAAI,eAAc,EAIlB,KAAM,CAAC,MAAAC,EAAO,KAAAC,CAAI,EAAIF,EAAI,cAAc,SAGjCV,EAAO,CACZ,MAAOW,EAAM,MACb,KAAMC,EAAK,KACjB,EACKb,EAAeC,CAAI,EACnB,KAAKa,GAAK,CACT,QAAQ,IAAIA,CAAG,EACfT,EAAU,mBAAmB,YAAaU,EAAiBD,CAAG,CAAC,CACrE,CAAG,EAAE,MAAM,IAAI,CACXP,EAAW,UAAY,wBAC3B,CAAG,EAAE,QAAQ,IAAI,CACbD,EAAY,UAAY,GACxB,WAAW,IAAI,CACbC,EAAW,UAAY,EAC7B,EAAO,GAAI,CACX,CAAG,CACH,CAEA,SAASQ,EAAiB,CAAC,GAAAC,EAAI,MAAAJ,EAAO,KAAAC,CAAI,EAAE,CAC1C,MAAO;AAAA,0BACiBG,CAAE;AAAA,sBACNJ,CAAK;AAAA,qBACNC,CAAI;AAAA,mBAEzB"}